<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Document</title>

<script src="../js/Bar.js"></script>

<script src="../js/lib.js"></script>
<script>
    var color=["red","orange","yellow","green","blue","navy","purple","black","pink","steel"];
    var wrapper;
    var cnt=0; //수를 세기위한 카운터변수 
    var flag=true;
    
    var bar=[]; //막대기 배열
    //bar =new Array()

    function init(){
        wrapper = document.getElementById("wrapper");
        wrapper.style.width = 500+"px";
        wrapper.style.height =400+ "px";
        wrapper.style.margin ="auto";
        wrapper.style.border="4px solid blue";
        wrapper.style.position="relative";

        createBar();
    }

    function createBar(){
        //constructor(container,width,height,x,y,bg) // 생성자 모습
        for(var i=0;i<10;i++){
                
            bar[i] = new Bar(wrapper, 50,50, 50*i , 0, color[getRandom(color.length)] , getRandom(350)+10 );

        }
    }

    function gameLoop(){
        if(flag){
                
            for(var i=0;i<10;i++){
                bar[i].render();
            }
            cnt++;
            setTarget();
        }
    }
    
    function setTarget(){
        //일정시간 간격으로 어떤 바를 움직일지를 결정하여 그 바의 타겟값을 지정해보자!
     //   console.log("Settarget()호출",cnt);
        //if(cnt%10==0){
            bar[getRandom(bar.length)].targetH = getRandom(350)+10;
       // }
        
    }

    window.addEventListener("load",function(){
        init();
        setInterval("gameLoop()",10);// fps frame per seconds
    });
</script>


</head>
<body>
    <div id="wrapper"></div>
<!-- 자바스크립트를 작성할수 있는 영역
    script태그 안
    이벤트 핸들러 안
    a href = "자바스크립트:영역"

-->
    <button onclick="flag=!flag">on/off</button>
    
</body>
</html>